<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Menu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src=https://code.jquery.com/jquery-3.6.0.js></script>

    <!-- Bootstrap JavaScript files -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
    <style>
        body{
    margin: 0;
}
ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: hidden;
  background-color: #333;
}

li {
  float: left;
  border-right:1px solid #bbb;
}

li:last-child {
  border-right: none;
}

li a {
  display: block;
  color: white;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

li a:hover:not(.active) {
  background-color: #111;
}

.active {
  background-color: #4DC3EB;
}
.card {
    display:inline-block;
    margin-bottom: 50px;
    background-color: white;
}

    </style>
</head>
<body>
<div class="navdiv">
    <ul>
        <li><a href="/">Начало</a></li>
        <li><a href="/menu" class="active">Меню</a></li>
        <li><a href="/orders">Поръчки</a></li>
        <Li><a href="/tables">Маси</a></Li>
        <li style="float:right"><a href="/login">Изход</a></li>
    </ul>
</div>
<div class="container">
    <a href="/dishes/create" class="btn btn-outline-secondary">Добави</a>

    <div th:each="type : ${T(com.waiter.waiter.enums.DishType).values()}">
        <h2 th:text="${type.getValue}"></h2>
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Име</th>
                <th>Цена</th>
                <th>Количество</th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="dish : ${dishes}" th:if="${dish.dishType == type.getValue}">
                <td th:text="${dish.name}"></td>
                <td th:text="${dish.price} + ' лв.'"></td>
                <td th:text="${dish.quantity} + ' ' + ${dish.dishQuantityType}"></td>

                <td>


                    <!-- Button trigger modal -->


                    <button type="button" class="btn btn-outline-primary btn-md" data-toggle="modal"
                            th:attr="data-target='#exampleModalCenter1'+${dish.id}">Още</button>

                    <!-- Modal -->
                    <div class="modal fade" th:id="*{'exampleModalCenter1'+{dish.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="viewDishModal">Още</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <h5 th:text="${dish.name}" class="text-center"></h5>
                                    <div class="card-text">
                                        <p>Тип: <span th:text="${dish.dishType}"></span></p>
                                        <p>Цена: <span th:text="${dish.price} + ' лв.'"></span></p>
                                        <p>Количество: <span th:text="${dish.quantity} + ' ' + ${dish.dishQuantityType}"></span></p>
                                        <p>Описание: <span th:text="${dish.description}"></span></p>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Затвори</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>

                <td>


                    <!-- Button trigger modal -->


                    <button type="button" class="btn btn-outline-primary btn-md" data-toggle="modal"
                            th:attr="data-target='#exampleModalCenter2'+${dish.id}">Промяна</button>

                    <!-- Modal -->
                    <div class="modal fade" th:id="*{'exampleModalCenter2'+{dish.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="updateDishModal">Промяна</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <form th:action="@{/dishes/update}" method="post">
                                        <!--<input type="hidden" th:field="${dish.id}">-->
                                        <p>Име: <input type="text" th:field="*{name}" placeholder="Въведете име" minlength="2" maxlength="30"
                                                       class="form-control border-3" required></p>
                                        :errors="*{name}" class="text-danger">name error</p>

                                        <!--<p>Цена: <input type="number" th:field="${dish.price}" placeholder="Въведете цена" min="0" step=".01"
                                                        class="form-control border-3" required></p>
                                        <p th:if="${#fields.hasErrors('price')}" th:errors="*{price}" class="text-danger">price error</p>

                                        <p>Описание: <textarea th:field="${dish.description}" placeholder="Въведете описание" minlength="2" maxlength="150"
                                                               class="form-control border-3"></textarea></p>
                                        <p th:if="${#fields.hasErrors('description')}" th:errors="*{description}" class="text-danger">description
                                            error</p>

                                        <p>Количество: <input type="number" th:field="${dish.quantity}" placeholder="Въведете количество" min="1"
                                                              class="form-control border-3" required>
                                            <select th:field="${dish.dishQuantityType}">
                                                <option th:each="type : ${T(com.waiter.waiter.enums.DishQuantityType).values()}"
                                                        th:value="${type}"
                                                        th:text="${type}">
                                                </option>
                                            </select>
                                        </p>
                                        <p th:if="${#fields.hasErrors('quantity')}" th:errors="*{quantity}" class="text-danger">quantity error</p>

                                        <p>Тип:
                                            <select th:field="${dish.dishType}">
                                                <option th:each="state : ${T(com.waiter.waiter.enums.DishType).values()}"
                                                        th:value="${state.getValue}"
                                                        th:text="${state.getValue}">
                                                </option>
                                            </select>
                                        </p>-->
                                        <input type="submit" value="Запази" class="btn btn-outline-success">
                                    </form>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Затвори</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
                <!--<td><a th:href="@{/dishes/edit/{dishId}(dishId=${dish.id})}" class="btn btn-outline-warning">Промяна</a></td>
                --><td>


                    <!-- Button trigger modal -->


                    <button type="button" class="btn btn-outline-danger btn-md" data-toggle="modal"
                            th:attr="data-target='#exampleModalCenter3'+${dish.id}">Премахване</button>

                    <!-- Modal -->
                    <div class="modal fade" th:id="*{'exampleModalCenter3'+{dish.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="deleteDishModal">Премахване</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    Искате ли да изтриете това ястие?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Затвори</button>
                                    <form th:action="@{/dishes/delete/{dishId}(dishId=${dish.id})}" method="post">
                                        <input type="submit" name="delete" value="Премахване" class="btn btn-outline-danger">
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>
    </div>


    <div th:each="type : ${T(com.waiter.waiter.enums.DrinkType).values()}">
        <h2 th:text="${type.getValue}"></h2>
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Име</th>
                <th>Цена</th>
                <th>Количество</th>
                <th></th>
                <th></th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="drink : ${drinks}" th:if="${drink.drinkType == type.getValue}">
                <td th:text="${drink.name}"></td>
                <td th:text="${drink.price} + ' лв.'"></td>
                <td th:text="${drink.quantity} + ' ' + ${drink.drinkQuantityType}"></td>

                <td>
                    <!--<form th:action="@{/drinks/more-info/{drinkId}(drinkId=${drink.id})}" method="post">
                        <input type="submit" name="more" value="Още" class="btn btn-outline-primary">
                    </form>-->
                    <a th:href="@{/drinks/more-info/{drinkId}(drinkId=${drink.id})}" class="btn btn-outline-warning">Още</a>
                </td>
                <td><a th:href="@{/drinks/edit/{drinkId}(drinkId=${drink.id})}" class="btn btn-outline-warning">Промяна</a></td>
                <td>


                    <!-- Button trigger modal -->


                    <button type="button" class="btn btn-outline-danger btn-md" data-toggle="modal"
                            th:attr="data-target='#exampleModalCenter6'+${drink.id}">Премахване</button>

                    <!-- Modal -->
                    <div class="modal fade" th:id="*{'exampleModalCenter6'+{drink.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="deleteDrinkModal">Премахване</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    Искате ли да изтриете тази напитка?
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Затвори</button>
                                    <form th:action="@{/drinks/delete/{drinkId}(drinkId=${drink.id})}" method="post">
                                        <input type="submit" name="delete" value="Премахване" class="btn btn-outline-danger">
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </td>


            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>
</html>